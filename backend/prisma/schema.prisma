generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  name      String
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
}

model categoriaproduto {
  idcategoria  Int       @id
  descategoria String?   @db.VarChar(50)
  produto      produto[]
}

model cliente {
  idcliente   Int      @id
  nomecliente String?  @db.VarChar(50)
  rua         String?  @db.VarChar(50)
  numero      String?  @db.VarChar(5)
  bairro      String?  @db.VarChar(50)
  cidade      String?  @db.VarChar(50)
  uf          String?  @db.VarChar(2)
  cep         String?  @db.VarChar(9)
  complemento String?  @db.VarChar(20)
  fone        String?  @db.VarChar(14)
  status      String?  @db.VarChar(5)
  vllimite    Decimal? @db.Decimal(12, 2)
  pedido      pedido[]
}

model pedido {
  nrpedido    Int          @id
  dtpedido    DateTime?    @db.Date
  idcliente   Int?
  cliente     cliente?     @relation(fields: [idcliente], references: [idcliente], onDelete: NoAction, onUpdate: NoAction)
  pedidoitens pedidoitens?
}

model pedidoitens {
  nrpedido   Int      @id
  nritem     Int?
  idproduto  Int?
  quantidade Decimal? @db.Decimal(12, 2)
  vlproduto  Decimal? @db.Decimal(12, 2)
  produto    produto? @relation(fields: [idproduto], references: [idproduto], onDelete: NoAction, onUpdate: NoAction)
  pedido     pedido   @relation(fields: [nrpedido], references: [nrpedido], onDelete: NoAction, onUpdate: NoAction)
}

model produto {
  idproduto        Int               @id
  desproduto       String?           @db.VarChar(50)
  preco            Decimal?          @db.Decimal(12, 2)
  idcategoria      Int?
  pedidoitens      pedidoitens[]
  categoriaproduto categoriaproduto? @relation(fields: [idcategoria], references: [idcategoria], onDelete: NoAction, onUpdate: NoAction)
}
